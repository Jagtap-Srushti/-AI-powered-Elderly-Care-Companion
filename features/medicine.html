<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Audio Medicine Reminder</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --primary: #0284c7;
    --secondary: #16a34a;
    --bg: #f0f9ff;
    --card-bg: #ffffff;
    --text-color: #333;
    --accent: #2563eb;
  }

  body {
    margin: 0;
    font-family: 'Roboto', sans-serif;
    background: var(--bg);
    color: var(--text-color);
    transition: background 0.3s, color 0.3s;
  }

  body.dark {
    --bg: #1e293b;
    --card-bg: #334155;
    --text-color: #f1f5f9;
  }

  header {
    position: sticky;
    top: 0;
    background: var(--primary);
    color: white;
    padding: 20px;
    text-align: center;
    font-size: 1.8rem;
    font-weight: 700;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  header button {
    background: white;
    color: var(--primary);
    border: none;
    padding: 8px 16px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
  }

  header button:hover {
    background: #e0f2fe;
  }

  .container {
    max-width: 500px;
    margin: 30px auto;
    padding: 20px;
  }

  h2 {
    text-align: center;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 25px;
  }

  .add-medicine {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }

  .add-medicine input[type="text"], 
  .add-medicine input[type="time"] {
    flex: 1;
    padding: 12px 15px;
    border-radius: 10px;
    border: 1px solid #ccc;
    font-size: 1rem;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
    transition: border 0.3s;
  }

  .add-medicine input:focus {
    border: 1px solid var(--primary);
    outline: none;
  }

  .add-medicine button {
    background: var(--secondary);
    border: none;
    padding: 12px 18px;
    border-radius: 10px;
    color: white;
    cursor: pointer;
    font-weight: 600;
    transition: 0.3s;
  }

  .add-medicine button:hover {
    background: #15803d;
    transform: translateY(-2px);
  }

  #medList {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .med-card {
    background: var(--card-bg);
    padding: 15px 20px;
    border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: transform 0.3s;
  }

  .med-card:hover {
    transform: translateY(-3px);
  }

  .med-info {
    font-size: 1.1rem;
    font-weight: 500;
  }

  .med-time {
    font-weight: 700;
    color: var(--accent);
  }

  .med-actions button {
    background: #dc2626;
    border: none;
    padding: 6px 12px;
    border-radius: 8px;
    color: white;
    cursor: pointer;
    font-weight: 600;
    transition: 0.3s;
  }

  .med-actions button:hover {
    background: #b91c1c;
  }

  .upcoming {
    text-align: center;
    font-weight: 600;
    color: var(--accent);
    margin-bottom: 20px;
  }

  .notification {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: var(--secondary);
    color: white;
    padding: 12px 20px;
    border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    display: none;
    font-weight: 600;
  }
</style>
</head>
<body>

<header>
  Audio Medicine Reminder
  <button onclick="toggleDarkMode()">ðŸŒ™</button>
</header>

<div class="container">
  <h2>Manage Your Medicines</h2>

  <div class="add-medicine">
    <input type="text" id="medName" placeholder="Medicine name">
    <input type="time" id="medTime">
    <button onclick="addMedicine()">Add</button>
  </div>

  <div class="upcoming" id="upcomingReminder"></div>

  <div id="medList"></div>
</div>

<div class="notification" id="notification"></div>

<script>
let medicines = JSON.parse(localStorage.getItem('medicines')) || [];
const alarmSound = new Audio('https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg');

function saveMedicines() {
  localStorage.setItem('medicines', JSON.stringify(medicines));
}

function addMedicine() {
  const name = document.getElementById('medName').value.trim();
  const time = document.getElementById('medTime').value;

  if (!name || !time) {
    alert("à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¦à¤µà¤¾ à¤•à¤¾ à¤¨à¤¾à¤® à¤”à¤° à¤¸à¤®à¤¯ à¤¡à¤¾à¤²à¥‡à¤‚!");
    return;
  }

  medicines.push({ name, time, alerted: false });
  saveMedicines();
  renderList();

  document.getElementById('medName').value = '';
  document.getElementById('medTime').value = '';
}

function deleteMedicine(index) {
  medicines.splice(index, 1);
  saveMedicines();
  renderList();
}

function renderList() {
  const medList = document.getElementById('medList');
  medList.innerHTML = '';
  medicines.forEach((med, index) => {
    const div = document.createElement('div');
    div.classList.add('med-card');
    div.innerHTML = `
      <div class="med-info">${med.name} <span class="med-time">${med.time}</span></div>
      <div class="med-actions"><button onclick="deleteMedicine(${index})">Delete</button></div>
    `;
    medList.appendChild(div);
  });
}

function checkMedicineTime() {
  const now = new Date();
  const hours = now.getHours().toString().padStart(2, "0");
  const minutes = now.getMinutes().toString().padStart(2, "0");
  const currentTime = `${hours}:${minutes}`;

  let nextMed = null;
  let minDiff = 24*60;

  medicines.forEach(med => {
    if (med.time === currentTime && !med.alerted) {
      alarmSound.play();
      const msg = new SpeechSynthesisUtterance(`à¤¸à¤®à¤¯ à¤¹à¥‹ à¤—à¤¯à¤¾ à¤¹à¥ˆ, à¤†à¤ªà¤•à¥€ à¤¦à¤µà¤¾ à¤²à¥‡à¤¨à¥‡ à¤•à¤¾: ${med.name}`);
      msg.lang = 'hi-IN';
      window.speechSynthesis.speak(msg);

      showNotification(`à¤¸à¤®à¤¯ à¤¹à¥‹ à¤—à¤¯à¤¾ à¤¹à¥ˆ, à¤¦à¤µà¤¾ à¤²à¥‡à¤‚: ${med.name}`);
      med.alerted = true;
    }

    if (med.time !== currentTime) med.alerted = false;

    const [h, m] = med.time.split(':').map(Number);
    const diff = (h*60 + m) - (hours*60 + minutes);
    if(diff > 0 && diff < minDiff){
      minDiff = diff;
      nextMed = med;
    }
  });

  const upcomingDiv = document.getElementById('upcomingReminder');
  upcomingDiv.textContent = nextMed ? `Next: ${nextMed.name} at ${nextMed.time}` : 'No upcoming medicine';
}

function toggleDarkMode() {
  document.body.classList.toggle('dark');
}

function showNotification(msg) {
  const notif = document.getElementById('notification');
  notif.textContent = msg;
  notif.style.display = 'block';
  setTimeout(() => { notif.style.display = 'none'; }, 5000);
}

renderList();
checkMedicineTime();
setInterval(checkMedicineTime, 10000);
</script>

</body>
</html>
